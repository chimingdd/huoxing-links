import{u as E}from"./curd-85148366.js";import{O as L,I as $,_ as q}from"./index-65d2ca96.js";import{d as A,j as d,k as M,r as u,o as m,b as g,i as o,w as c,f as r,g as e,ah as P,l as C,F as x,e as T,a as U,h as j,aj as H,E as O,v as R}from"./.pnpm-0d809032.js";import{_ as G}from"./FormModal.vue_vue_type_script_setup_true_lang-7a4a6970.js";import{_ as J}from"./create-or-look.vue_vue_type_script_setup_true_lang-9f6f4835.js";import K from"./cate-cdaeda59.js";import{A as Q}from"./app-f53b8400.js";import"./propData-9c18804a.js";import"./form-55b2d4db.js";const W={class:"top-box"},X={class:"header-right",style:{"margin-bottom":"10px"}},Y={class:"content-box"},Z={style:{"margin-bottom":"15px","margin-left":"8px"}},ee={class:"item-list"},te=["onClick","onDblclick"],ae=["src"],oe=A({__name:"index",setup(le){const v=d(null),{state:t,showForm:y,submitForm:k,sizeChangeHandle:w,currentChangeHandle:V,query:f}=E({url:"/material-upload",limit:48,queryForm:{cate_id:v,page:1}}),l=d([]),z=s=>{const n=l.value.find(i=>i===s);n?l.value=l.value.filter(i=>i!==n):l.value.push(s)},B=()=>{H.confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Q(l.value).then(()=>{O.success("操作成功！"),window.location.reload()})})},p=d(!1),h=d(""),I=s=>{h.value=$(s),p.value=!0},N=s=>{v.value=s,f()};return M("query",f),(s,n)=>{var b;const i=u("el-button"),D=u("el-pagination"),F=u("el-card"),S=u("el-dialog");return m(),g(x,null,[o(F,null,{default:c(()=>[r("div",W,[r("div",X,[o(i,{type:"primary",icon:e(P),onClick:e(y)},{default:c(()=>[C("上传图片")]),_:1},8,["icon","onClick"])]),o(i,{type:"primary",disabled:!l.value,plain:"",onClick:B},{default:c(()=>[C(" 删除选中项 ")]),_:1},8,["disabled"])]),r("div",Y,[r("div",Z,[o(K,{onRsCate:N})]),r("div",ee,[(m(!0),g(x,null,T(e(t).dataList,a=>(m(),g("div",{class:R(["item-img",{"active-border":l.value.find(_=>_===a.id)}]),key:a.id,onClick:_=>z(a.id),onDblclick:_=>I(a.path)},[o(L,{paths:[a.path],width:100,height:100},null,8,["paths"])],42,te))),128))]),o(D,{"current-page":e(t).page,total:e(t).total,"page-sizes":e(t).pageSizes,"page-size":e(t).limit,background:"",layout:"total,  prev, pager, next",onSizeChange:e(w),onCurrentChange:e(V)},null,8,["current-page","total","page-sizes","page-size","onSizeChange","onCurrentChange"])])]),_:1}),o(S,{modelValue:p.value,"onUpdate:modelValue":n[0]||(n[0]=a=>p.value=a)},{default:c(()=>[r("img",{class:"preview",src:h.value,alt:"Preview Image",style:{"max-width":"100%",margin:"0 auto"}},null,8,ae)]),_:1},8,["modelValue"]),e(t).formVisible===!0?(m(),U(G,{key:0,visible:e(t).formVisible,"onUpdate:visible":n[1]||(n[1]=a=>e(t).formVisible=a),loading:e(t).formLoading,detail:e(t).detailData,onSubmit:e(k),type:"dialog",width:"600",title:(b=e(t).detailData)!=null&&b.id?"编辑":"新增",cancelBtnName:"取消",okBtnName:"确定"},{default:c(()=>[o(J)]),_:1},8,["visible","loading","detail","onSubmit","title"])):j("",!0)],64)}}});const _e=q(oe,[["__scopeId","data-v-e2825680"]]);export{_e as default};
