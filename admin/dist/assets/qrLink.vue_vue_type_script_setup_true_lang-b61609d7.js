import{j as f}from"./jsqr-1ed38a09.js";import{d as h,r as _,ag as w,o as x,c as C,Q as k,I as v,M as V}from"./@vue-d872a633.js";const I=h({__name:"qrLink",props:{modelValue:{}},emits:["update:modelValue"],setup(y,{emit:d}){const m=d,r=_(null),u=async()=>{const t=document.createElement("input");t.type="file",t.accept="image/*",t.click(),t.addEventListener("change",e=>{if(!e.target.files||!e.target.files[0])return;const o=e.target.files[0],c=new FileReader;c.onload=g=>{const p=g.target.result,a=document.createElement("canvas"),l=a.getContext("2d"),n=new Image;n.onload=()=>{a.width=n.naturalWidth,a.height=n.naturalHeight,l.drawImage(n,0,0);const s=l.getImageData(0,0,a.width,a.height),i=f(s.data,s.width,s.height);i?(r.value=i.data,m("update:modelValue",r.value)):alert("无法识别二维码，请确保上传的是有效的二维码图片。")},n.src=p},c.readAsDataURL(o)})};return(t,e)=>{const o=w("el-button");return x(),C("div",null,[k(o,{type:"primary",onClick:u},{default:v(()=>e[0]||(e[0]=[V("选择图片")])),_:1})])}}});export{I as _};
