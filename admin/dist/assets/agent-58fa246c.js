import{u as E}from"./curd-b17e16e8.js";import{B as N}from"./@element-plus-11e7d0b3.js";import{_ as L}from"./FormModal.vue_vue_type_script_setup_true_lang-9b833357.js";import{_ as H}from"./agentForm.vue_vue_type_script_setup_true_lang-8c55c894.js";import{_ as U}from"./addAgentForm.vue_vue_type_script_setup_true_lang-ea7eecdf.js";import{u as $}from"./index-1cb382aa.js";import{E as q}from"./newAgent-18c447d6.js";import{E as I}from"./element-plus-baf202ae.js";import{d as M,ag as l,aq as A,o as m,c as J,Q as o,I as i,a as K,u as e,H as s,M as _,L as b,J as P,P as Q}from"./@vue-d872a633.js";import"./propData-8a0097e5.js";import"./form-3c660157.js";import"./super-7177c5c9.js";import"./pinia-cb4be529.js";import"./vue-demi-71ba0ef2.js";import"./pinia-plugin-persistedstate-ed167f96.js";import"./axios-439bb627.js";import"./qs-6612e700.js";import"./side-channel-32a248f0.js";import"./es-errors-c75f5a96.js";import"./object-inspect-110ff94a.js";import"./call-bind-apply-helpers-be8cb158.js";import"./function-bind-48f717dc.js";import"./side-channel-list-1667605c.js";import"./side-channel-map-a9d6574a.js";import"./get-intrinsic-8d8987ad.js";import"./es-object-atoms-11ea1ab9.js";import"./math-intrinsics-9389030e.js";import"./gopd-30775706.js";import"./es-define-property-27915812.js";import"./has-symbols-76fb15e9.js";import"./get-proto-15e8f36b.js";import"./dunder-proto-2a4d8230.js";import"./hasown-31deb62f.js";import"./call-bound-dbfc98a1.js";import"./side-channel-weakmap-a7bef06b.js";import"./vue-router-154b9487.js";import"./@vueuse-9028f0e6.js";import"./nprogress-72cfee09.js";/* empty css                    */import"./lodash-es-32f1e46b.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-f13f0179.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-5ec34e26.js";const T={class:"margin-b-20"},Ae=M({__name:"agent",setup(j){const{state:t,sizeChangeHandle:y,currentChangeHandle:C,showForm:g,submitForm:k,research:h}=E({url:"/users"}),v=$,V=(c,a)=>{q(c,a).then(()=>{let n=a===!0?"操作成功！最多需要10秒才能生效":"操作成功！";I.success(n)}).catch(()=>{var n;(n=t.dataList)==null||n.forEach(u=>{u.id===c&&(u.is_enable=!a)})})};return(c,a)=>{var f;const n=l("el-button"),u=l("el-input"),x=l("el-space"),p=l("el-table-column"),z=l("el-switch"),F=l("el-empty"),w=l("el-table"),B=l("el-pagination"),D=l("el-card"),S=A("loading");return m(),J(Q,null,[o(D,null,{default:i(()=>[K("div",T,[o(x,null,{default:i(()=>[e(v).userInfo.type===3?(m(),s(n,{key:0,type:"primary",icon:e(N),onClick:e(g)},{default:i(()=>a[2]||(a[2]=[_("新增")])),_:1},8,["icon","onClick"])):b("",!0),o(u,{modelValue:e(t).queryForm.username,"onUpdate:modelValue":a[0]||(a[0]=r=>e(t).queryForm.username=r),placeholder:"请输入手机号查询"},null,8,["modelValue"]),o(n,{type:"primary",onClick:e(h)},{default:i(()=>a[3]||(a[3]=[_("查询")])),_:1},8,["onClick"])]),_:1})]),P((m(),s(w,{data:e(t).dataList,"header-cell-style":{"text-align":"center","background-color":"#F1F1F1",height:"50px",color:"#333"},"cell-style":{padding:"0","text-align":"center",height:"50px",color:"#333"},"row-key":e(t).primaryKey},{empty:i(()=>[o(F)]),default:i(()=>[o(p,{prop:"id",label:"ID",width:"60"}),o(p,{prop:"username",label:"手机号"}),o(p,{prop:"link_amount",label:"链接剩余个数"}),o(p,{prop:"yuanma_amount",label:"小圆码剩余个数"}),o(p,{prop:"dy_card_amount",label:"自动回复剩余个数"}),o(p,{prop:"created_at",label:"账户状态"},{default:i(({row:r})=>[o(z,{modelValue:r.status,"onUpdate:modelValue":d=>r.status=d,"active-value":!0,"inactive-value":!1,"active-text":"开启","inactive-text":"禁用","inline-prompt":"",onChange:d=>V(r.id,d)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),o(p,{prop:"",label:"操作",fixed:"right"},{default:i(({row:r})=>[o(n,{type:"primary",link:"",onClick:d=>e(g)(r.id)},{default:i(()=>a[4]||(a[4]=[_("修改")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","row-key"])),[[S,e(t).listLoading]]),o(B,{"current-page":e(t).page,total:e(t).total,"page-sizes":e(t).pageSizes,"page-size":e(t).limit,background:"",layout:"total, sizes, prev, pager, next",onSizeChange:e(y),onCurrentChange:e(C)},null,8,["current-page","total","page-sizes","page-size","onSizeChange","onCurrentChange"])]),_:1}),e(t).formVisible===!0?(m(),s(L,{key:0,visible:e(t).formVisible,"onUpdate:visible":a[1]||(a[1]=r=>e(t).formVisible=r),loading:e(t).formLoading,detail:e(t).detailData,onSubmit:e(k),type:"dialog",width:"600",title:(f=e(t).detailData)!=null&&f.id?"编辑":"新增",cancelBtnName:"取消",okBtnName:"确定"},{default:i(()=>[e(t).detailData&&e(t).detailData.id?(m(),s(H,{key:0})):(m(),s(U,{key:1}))]),_:1},8,["visible","loading","detail","onSubmit","title"])):b("",!0)],64)}}});export{Ae as default};
