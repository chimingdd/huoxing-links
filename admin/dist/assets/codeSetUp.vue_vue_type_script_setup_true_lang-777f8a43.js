import{m as h,c as k}from"./index-65d2ca96.js";import{d as b,j as x,y as w,r as n,o as _,a as U,w as u,f as o,i as s,b as m,h as r,l as C,E as d}from"./.pnpm-0d809032.js";const S={style:{width:"500px"}},B=o("div",{class:"margin-b-10",style:{"margin-top":"20px"}},"是否开启验证码",-1),N=o("div",{class:"margin-b-10",style:{"margin-top":"20px"}},"验证码发送方式",-1),E={key:0},j=o("div",{class:"margin-b-10",style:{"margin-top":"20px"}},"阿里短信key",-1),z={key:1},A=o("div",{class:"margin-b-10",style:{"margin-top":"20px"}},"阿里短信secret",-1),D={key:2},F=o("div",{class:"margin-b-10",style:{"margin-top":"20px"}},"阿里短信签名",-1),M={key:3},T=o("div",{class:"margin-b-10",style:{"margin-top":"20px"}},"发信名称",-1),q={key:4},G=o("div",{class:"margin-b-10",style:{"margin-top":"20px"}},"服务器地址",-1),H={key:5},I=o("div",{class:"margin-b-10",style:{"margin-top":"20px"}},"端口",-1),J={key:6},K=o("div",{class:"margin-b-10",style:{"margin-top":"20px"}},"发信地址",-1),L={key:7},O=o("div",{class:"margin-b-10",style:{"margin-top":"20px"}},"发信账号",-1),P={key:8},Q=o("div",{class:"margin-b-10",style:{"margin-top":"20px"}},"发信密码",-1),R={class:"m-b-20 text-center",style:{"margin-top":"60px"}},Z=b({__name:"codeSetUp",props:{data:{}},setup(p){const t=p,e=x({verify_code_is_open:0,send_code_mode:1,ali_sms_key:"",ali_sms_secret:"",ali_sms_sign_name:"",mail_from_name:"",mail_host:"",mail_port:"",mail_from_address:"",mail_username:"",mail_password:""});w(()=>t.data,()=>{e.value.verify_code_is_open=t.data.verify_code_is_open,e.value.send_code_mode=t.data.send_code_mode,e.value.ali_sms_key=t.data.ali_sms_key,e.value.ali_sms_secret=t.data.ali_sms_secret,e.value.ali_sms_sign_name=t.data.ali_sms_sign_name,e.value.mail_from_name=t.data.mail_from_name,e.value.mail_host=t.data.mail_host,e.value.mail_port=t.data.mail_port,e.value.mail_from_address=t.data.mail_from_address,e.value.mail_username=t.data.mail_username,e.value.mail_password=t.data.mail_password},{deep:!0,immediate:!0});const c=()=>{if(e.value.verify_code_is_open){if(!e.value.send_code_mode){d.error("请选择发送方式");return}if(e.value.send_code_mode===1){if(!e.value.ali_sms_key){d.error("请填写阿里短信key");return}if(!e.value.ali_sms_secret){d.error("请填写阿里短信secret");return}if(!e.value.ali_sms_secret){d.error("请填写阿里短信secret");return}}else if(e.value.send_code_mode===2){if(!e.value.mail_from_name){d.error("请填写发信名称");return}if(!e.value.mail_host){d.error("请填写服务器地址");return}if(!e.value.mail_port){d.error("请填写端口");return}if(!e.value.mail_from_address){d.error("请填写发信地址");return}if(!e.value.mail_username){d.error("请填写邮箱账号");return}if(!e.value.mail_password){d.error("请填写邮箱密码");return}}}h(e.value).then(()=>{d.success("保存成功"),k.refreshConfig()})};return(W,l)=>{const f=n("el-switch"),v=n("el-option"),y=n("el-select"),i=n("el-input"),V=n("el-button"),g=n("el-card");return _(),U(g,null,{default:u(()=>[o("div",S,[o("div",null,[B,s(f,{style:{width:"100%"},"active-value":1,"inactive-value":0,modelValue:e.value.verify_code_is_open,"onUpdate:modelValue":l[0]||(l[0]=a=>e.value.verify_code_is_open=a)},null,8,["modelValue"])]),o("div",null,[N,s(y,{style:{width:"100%"},modelValue:e.value.send_code_mode,"onUpdate:modelValue":l[1]||(l[1]=a=>e.value.send_code_mode=a),placeholder:"请选择验证码发送方式"},{default:u(()=>[s(v,{label:"短信",value:1}),s(v,{label:"邮箱",value:2})]),_:1},8,["modelValue"])]),e.value.send_code_mode===1?(_(),m("div",E,[j,s(i,{modelValue:e.value.ali_sms_key,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value.ali_sms_key=a),placeholder:"请输入阿里短信key"},null,8,["modelValue"])])):r("",!0),e.value.send_code_mode===1?(_(),m("div",z,[A,s(i,{modelValue:e.value.ali_sms_secret,"onUpdate:modelValue":l[3]||(l[3]=a=>e.value.ali_sms_secret=a),placeholder:"请输入阿里短信secret"},null,8,["modelValue"])])):r("",!0),e.value.send_code_mode===1?(_(),m("div",D,[F,s(i,{modelValue:e.value.ali_sms_sign_name,"onUpdate:modelValue":l[4]||(l[4]=a=>e.value.ali_sms_sign_name=a),placeholder:"请输入阿里短信签名"},null,8,["modelValue"])])):r("",!0),e.value.send_code_mode===2?(_(),m("div",M,[T,s(i,{modelValue:e.value.mail_from_name,"onUpdate:modelValue":l[5]||(l[5]=a=>e.value.mail_from_name=a),placeholder:"请输入发信名称"},null,8,["modelValue"])])):r("",!0),e.value.send_code_mode===2?(_(),m("div",q,[G,s(i,{modelValue:e.value.mail_host,"onUpdate:modelValue":l[6]||(l[6]=a=>e.value.mail_host=a),placeholder:"请输入服务器地址"},null,8,["modelValue"])])):r("",!0),e.value.send_code_mode===2?(_(),m("div",H,[I,s(i,{modelValue:e.value.mail_port,"onUpdate:modelValue":l[7]||(l[7]=a=>e.value.mail_port=a),placeholder:"端口"},null,8,["modelValue"])])):r("",!0),e.value.send_code_mode===2?(_(),m("div",J,[K,s(i,{modelValue:e.value.mail_from_address,"onUpdate:modelValue":l[8]||(l[8]=a=>e.value.mail_from_address=a),placeholder:"请输入发信地址"},null,8,["modelValue"])])):r("",!0),e.value.send_code_mode===2?(_(),m("div",L,[O,s(i,{modelValue:e.value.mail_username,"onUpdate:modelValue":l[9]||(l[9]=a=>e.value.mail_username=a),placeholder:"请输入发信账号"},null,8,["modelValue"])])):r("",!0),e.value.send_code_mode===2?(_(),m("div",P,[Q,s(i,{modelValue:e.value.mail_password,"onUpdate:modelValue":l[10]||(l[10]=a=>e.value.mail_password=a),placeholder:"请输入发信密码"},null,8,["modelValue"])])):r("",!0),o("div",R,[s(V,{type:"primary",size:"large",onClick:c},{default:u(()=>[C("保存")]),_:1})])])]),_:1})}}});export{Z as _};
