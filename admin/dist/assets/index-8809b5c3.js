import{d as U,j as L,r,X as E,o as c,b as g,i as e,w as l,f as u,g as t,ah as j,l as s,Y as q,a as f,ai as H,t as v,h as I,F as K}from"./.pnpm-9b0f0a98.js";import{u as P}from"./curd-ef40f08e.js";import{_ as T}from"./FormModal.vue_vue_type_script_setup_true_lang-b27420e1.js";import{_ as X}from"./create-or-look.vue_vue_type_script_setup_true_lang-9babd052.js";import{_ as Y}from"./index-625b9482.js";import"./propData-3c6625bc.js";import"./form-e5ba5cf1.js";const z={class:"header-right"},A={key:0},G=U({__name:"index",setup(J){const{state:o,showForm:y,submitForm:h,deleteHandle:C,query:x,inlineEdit:V}=P({url:"/vip-packages",openPage:!1}),F=()=>{_.value=!1},_=L(!0),B=async m=>{await V(m.id,"level",m.level),await x(),_.value=!0};return(m,p)=>{var k;const n=r("el-button"),d=r("el-table-column"),N=r("el-input-number"),$=r("el-empty"),D=r("el-table"),S=r("el-card"),w=E("loading");return c(),g(K,null,[e(S,null,{default:l(()=>[u("div",z,[e(n,{type:"primary",icon:t(j),onClick:t(y)},{default:l(()=>[s("新增套餐")]),_:1},8,["icon","onClick"])]),q((c(),f(D,{data:t(o).dataList,"header-cell-style":{"text-align":"center","background-color":"#F1F1F1",height:"50px",color:"#333"},"cell-style":{padding:"0","text-align":"center",height:"50px",color:"#333"},"row-key":t(o).primaryKey},{empty:l(()=>[e($)]),default:l(()=>[e(d,{prop:"name",label:"套餐名称"}),e(d,{prop:"price",label:"价格/月"}),e(d,{prop:"level",label:"等级"},{default:l(({row:a})=>[_.value===!1?(c(),g("div",A,[e(N,{modelValue:a.level,"onUpdate:modelValue":i=>a.level=i},null,8,["modelValue","onUpdate:modelValue"]),e(n,{type:"primary",link:"",onClick:p[0]||(p[0]=i=>_.value=!0)},{default:l(()=>[s("取消")]),_:1}),e(n,{type:"primary",link:"",onClick:i=>B(a)},{default:l(()=>[s("确认")]),_:2},1032,["onClick"])])):(c(),f(n,{key:1,type:"primary",link:"",icon:t(H),onClick:F},{default:l(()=>[s(v(a.level),1)]),_:2},1032,["icon"]))]),_:1}),e(d,{label:"权限配置"},{default:l(({row:a})=>{var i,b;return[u("div",null,"链接数量："+v((i=a.config)==null?void 0:i.count_limit),1),u("div",null,"UV限制："+v((b=a.config)==null?void 0:b.uv_limit),1)]}),_:1}),e(d,{prop:"created_at",label:"创建时间"}),e(d,{prop:"",label:"操作",fixed:"right"},{default:l(({row:a})=>[e(n,{type:"primary",link:"",onClick:i=>t(y)(a)},{default:l(()=>[s("编辑")]),_:2},1032,["onClick"]),e(n,{type:"primary",link:"",onClick:i=>t(C)(a.id)},{default:l(()=>[s("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","row-key"])),[[w,t(o).listLoading]])]),_:1}),t(o).formVisible===!0?(c(),f(T,{key:0,visible:t(o).formVisible,"onUpdate:visible":p[1]||(p[1]=a=>t(o).formVisible=a),loading:t(o).formLoading,detail:t(o).detailData,onSubmit:t(h),type:"dialog",width:"1000",title:(k=t(o).detailData)!=null&&k.id?"编辑":"新增",cancelBtnName:"取消",okBtnName:"确定"},{default:l(()=>[e(X)]),_:1},8,["visible","loading","detail","onSubmit","title"])):I("",!0)],64)}}});const te=Y(G,[["__scopeId","data-v-dd738d00"]]);export{te as default};
