import{U as B,M as j}from"./MaterialSelect-16719e12.js";import{u as E}from"./form-3c660157.js";import{O as x,u as P,_ as S}from"./index-eb0483c8.js";import{A as F}from"./domain-c5d305d6.js";import{b as N}from"./app-bf1cc552.js";import{d as R,r as g,b as z,ag as m,aq as H,o as p,c as _,a as n,Q as i,I as s,O as d,u as e,J,H as f,P as v,a5 as w}from"./@vue-d872a633.js";import"./propData-8a0097e5.js";import"./curd-66c8d773.js";import"./element-plus-baf202ae.js";import"./lodash-es-32f1e46b.js";import"./@element-plus-11e7d0b3.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-f13f0179.js";import"./call-bind-apply-helpers-be8cb158.js";import"./function-bind-48f717dc.js";import"./es-errors-c75f5a96.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-5ec34e26.js";import"./cate-ef64fc7b.js";import"./pinia-cb4be529.js";import"./vue-demi-71ba0ef2.js";import"./pinia-plugin-persistedstate-ed167f96.js";import"./axios-439bb627.js";import"./qs-6612e700.js";import"./side-channel-32a248f0.js";import"./object-inspect-110ff94a.js";import"./side-channel-list-1667605c.js";import"./side-channel-map-a9d6574a.js";import"./get-intrinsic-8d8987ad.js";import"./es-object-atoms-11ea1ab9.js";import"./math-intrinsics-9389030e.js";import"./gopd-30775706.js";import"./es-define-property-27915812.js";import"./has-symbols-76fb15e9.js";import"./get-proto-15e8f36b.js";import"./dunder-proto-2a4d8230.js";import"./hasown-31deb62f.js";import"./call-bound-dbfc98a1.js";import"./side-channel-weakmap-a7bef06b.js";import"./vue-router-154b9487.js";import"./@vueuse-9028f0e6.js";import"./nprogress-72cfee09.js";/* empty css                    */const Q={style:{"margin-top":"-30px"},class:"m-b-20"},G={class:"main"},K={class:"item-box"},T={class:"function-img"},W={class:"show hidden-md-and-down"},X={class:"show-box"},Y={class:"show-des"},Z={class:"show-des-t"},$={class:"show-des-b"},oo=R({__name:"create-or-look",setup(eo){const V=g(),{formData:t,formLoading:y}=E({formRef:V,defVal(r){return{title:r==null?void 0:r.title,type:"1",description:r==null?void 0:r.description,icon:r==null?void 0:r.icon,remark:r==null?void 0:r.remark,config:r!=null&&r.config?r==null?void 0:r.config:{}}}}),b=g(),L=async()=>{b.value=await F()},c=g(),U=async()=>{c.value=await N()},q={title:[{required:!0,message:"请输入标题",trigger:"blur"}],"config.domain_id":[{required:!0,message:"请选择域名",trigger:"blur"}],"config.min_id":[{required:!0,message:"请选择小程序",trigger:"blur"}],"config.url":[{required:!0,message:"落地小程序页面路径不能为空",trigger:"blur"}]};z(()=>{L(),U()});const D=P,I=r=>{c.value.forEach(o=>{o.id==r&&(t.value.config.url=o.url)})};return(r,o)=>{const M=m("el-space"),u=m("el-input"),a=m("el-form-item"),h=m("el-option"),k=m("el-select"),C=m("el-form"),O=m("el-divider"),A=H("loading");return p(),_(v,null,[n("div",Q,[i(M,{class:"text-main"},{default:s(()=>[n("span",null,"总个数："+d(e(D).userInfo.link_amount)+"个",1),o[8]||(o[8]=n("span",null,"消耗个数：1个",-1))]),_:1})]),n("div",G,[J((p(),f(C,{model:e(t),rules:q,ref_key:"formRef",ref:V,class:"form-box margin-right-40","label-position":"top"},{default:s(()=>[i(a,{prop:"title",label:"卡片标题"},{default:s(()=>[i(u,{modelValue:e(t).title,"onUpdate:modelValue":o[0]||(o[0]=l=>e(t).title=l),placeholder:"请输入卡片标题"},null,8,["modelValue"])]),_:1}),i(a,{label:"卡片描述"},{default:s(()=>[i(u,{modelValue:e(t).description,"onUpdate:modelValue":o[1]||(o[1]=l=>e(t).description=l),placeholder:"请输入卡片描述"},null,8,["modelValue"])]),_:1}),i(a,{label:"卡片封面图"},{default:s(()=>[n("div",K,[i(x,{class:"margin-right-20",paths:e(t).icon?[e(t).icon]:[],width:100,height:100},null,8,["paths"]),n("div",null,[n("div",T,[i(B,{class:"margin-right-10",type:["image/jpg","image/jpeg","image/png"],size:1,modelValue:e(t).icon,"onUpdate:modelValue":o[2]||(o[2]=l=>e(t).icon=l)},null,8,["modelValue"]),i(j,{modelValue:e(t).icon,"onUpdate:modelValue":o[3]||(o[3]=l=>e(t).icon=l),class:"margin-right-20"},null,8,["modelValue"])]),o[9]||(o[9]=n("span",{class:"tip"},"只能上传jpg/png，建议大小100*100，且不超过1Mb",-1))])])]),_:1}),i(a,{label:"卡片备注"},{default:s(()=>[i(u,{modelValue:e(t).remark,"onUpdate:modelValue":o[4]||(o[4]=l=>e(t).remark=l),placeholder:"请输入卡片备注，例如：xxx活动（选填）"},null,8,["modelValue"])]),_:1}),i(a,{prop:"config.domain_id",label:"无风险域名"},{default:s(()=>[i(k,{modelValue:e(t).config.domain_id,"onUpdate:modelValue":o[5]||(o[5]=l=>e(t).config.domain_id=l),placeholder:"请选择"},{default:s(()=>[(p(!0),_(v,null,w(b.value,l=>(p(),f(h,{key:l.id,label:l.title,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(a,{prop:"config.min_id",label:"落地小程序",required:""},{default:s(()=>[i(k,{modelValue:e(t).config.min_id,"onUpdate:modelValue":o[6]||(o[6]=l=>e(t).config.min_id=l),placeholder:"请选择",onChange:I},{default:s(()=>[(p(!0),_(v,null,w(c.value,l=>(p(),f(h,{key:l.id,label:l.name,value:l.id},{default:s(()=>[n("span",null,d(l.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(a,{prop:"config.url",label:"落地小程序页面路径"},{default:s(()=>[i(u,{modelValue:e(t).config.url,"onUpdate:modelValue":o[7]||(o[7]=l=>e(t).config.url=l),placeholder:"例如：/pages/index"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[A,e(y)]]),n("div",W,[i(O,null,{default:s(()=>o[10]||(o[10]=[n("span",null,"抖音卡片预览",-1)])),_:1}),n("div",X,[i(x,{class:"margin-right-20",paths:e(t).icon?[e(t).icon]:[],width:100,height:100},null,8,["paths"]),n("div",Y,[n("span",Z,d(e(t).title||"卡片标题"),1),n("span",$,d(e(t).description||"卡片描述"),1)])])])])],64)}}});const Wo=S(oo,[["__scopeId","data-v-e9f76583"]]);export{Wo as default};
