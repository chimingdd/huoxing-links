import{u as j}from"./curd-b17e16e8.js";import{_ as k}from"./FormModal.vue_vue_type_script_setup_true_lang-9b833357.js";import{m as N,_ as G}from"./index-1cb382aa.js";import W from"./user-action-3548d935.js";import X from"./create-or-look-f25902f1.js";import{B as Y,R as S}from"./@element-plus-11e7d0b3.js";import Z from"./agent-commission-a9001682.js";import{E as U}from"./element-plus-baf202ae.js";import{d as ee,r as u,ag as s,aq as te,o as p,c as C,Q as e,I as i,u as o,M as c,a as oe,J as ie,H as _,O as D,L as h,P as le}from"./@vue-d872a633.js";import"./propData-8a0097e5.js";import"./pinia-cb4be529.js";import"./vue-demi-71ba0ef2.js";import"./pinia-plugin-persistedstate-ed167f96.js";import"./axios-439bb627.js";import"./qs-6612e700.js";import"./side-channel-32a248f0.js";import"./es-errors-c75f5a96.js";import"./object-inspect-110ff94a.js";import"./call-bind-apply-helpers-be8cb158.js";import"./function-bind-48f717dc.js";import"./side-channel-list-1667605c.js";import"./side-channel-map-a9d6574a.js";import"./get-intrinsic-8d8987ad.js";import"./es-object-atoms-11ea1ab9.js";import"./math-intrinsics-9389030e.js";import"./gopd-30775706.js";import"./es-define-property-27915812.js";import"./has-symbols-76fb15e9.js";import"./get-proto-15e8f36b.js";import"./dunder-proto-2a4d8230.js";import"./hasown-31deb62f.js";import"./call-bound-dbfc98a1.js";import"./side-channel-weakmap-a7bef06b.js";import"./vue-router-154b9487.js";import"./@vueuse-9028f0e6.js";import"./nprogress-72cfee09.js";/* empty css                    */import"./lodash-es-32f1e46b.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-f13f0179.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-5ec34e26.js";import"./form-3c660157.js";import"./super-7177c5c9.js";const ae={class:"header-right"},ne={key:0},re={key:1},se=ee({__name:"index",setup(pe){const{state:a,showForm:$,submitForm:q,research:E,sizeChangeHandle:I,currentChangeHandle:L}=j({url:"/users",queryForm:{page:1,type:2}}),x=n=>{N(n.id,{status:!n.status}).then(()=>{U.success("操作成功！"),window.location.reload()})},g=u(!1),w=u(),f=u(),v=u(),F=(n,t)=>{g.value=!0,w.value=n,f.value=t,t=="level_id"?v.value="更改等级":t=="credit"?v.value="充值积分":t=="parent_id"&&(v.value="更改级别")},A=(n,t)=>{var d={};f.value=="level_id"?d={level_id:n.level_id}:f.value=="credit"?d={credit:n.credit}:f.value=="parent_id"&&(d={parent_id:n.parent_id}),N(t.id,d).then(()=>{U.success("操作成功！"),window.location.reload()})},y=u(!1),V=u(),H=n=>{console.log(n),y.value=!0,V.value=n};return(n,t)=>{var B;const d=s("el-input"),P=s("el-form-item"),z=s("el-col"),m=s("el-button"),M=s("el-row"),T=s("el-form"),r=s("el-table-column"),J=s("el-empty"),K=s("el-table"),O=s("el-pagination"),Q=s("el-card"),R=te("loading");return p(),C(le,null,[e(Q,null,{default:i(()=>[e(T,null,{default:i(()=>[e(M,{gutter:20},{default:i(()=>[e(z,{span:4},{default:i(()=>[e(P,null,{default:i(()=>[e(d,{modelValue:o(a).queryForm.username,"onUpdate:modelValue":t[0]||(t[0]=l=>o(a).queryForm.username=l),placeholder:"请输入手机号",style:{width:"260px"},clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(z,{span:4},{default:i(()=>[e(m,{type:"primary",onClick:o(E)},{default:i(()=>t[4]||(t[4]=[c("查询")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),oe("div",ae,[e(m,{type:"primary",icon:o(Y),onClick:o($)},{default:i(()=>t[5]||(t[5]=[c("新增代理")])),_:1},8,["icon","onClick"])]),ie((p(),_(K,{data:o(a).dataList,"header-cell-style":{"text-align":"center","background-color":"#F1F1F1",height:"50px",color:"#333"},"cell-style":{padding:"0","text-align":"center",height:"50px",color:"#333"},"row-key":o(a).primaryKey},{empty:i(()=>[e(J)]),default:i(()=>[e(r,{prop:"id",label:"ID",width:"60"}),e(r,{prop:"username",label:"手机号",width:"120"}),e(r,{prop:"agent_package.name",label:"当前套餐"}),e(r,{prop:"credit",label:"剩余积分"},{default:i(({row:l})=>[e(m,{type:"primary",link:"",icon:o(S),onClick:b=>F(l,"credit")},{default:i(()=>[c(D(l.credit),1)]),_:2},1032,["icon","onClick"])]),_:1}),e(r,{prop:"accumulate_credit",label:"累计充值积分"}),e(r,{prop:"commission",label:"剩余佣金",width:"120"}),e(r,{prop:"accumulate_commission",label:"累计佣金",width:"120"}),e(r,{prop:"referral_code",label:"推荐码"}),e(r,{prop:"parent.username",label:"上级"},{default:i(({row:l})=>[e(m,{type:"primary",link:"",icon:o(S),onClick:b=>F(l,"parent_id")},{default:i(()=>[l.parent&&l.parent.username?(p(),C("span",ne,D(l.parent.username),1)):(p(),C("span",re))]),_:2},1032,["icon","onClick"])]),_:1}),e(r,{prop:"created_at",label:"注册时间",width:"160"}),e(r,{prop:"",label:"操作",fixed:"right",width:"200"},{default:i(({row:l})=>[l.status?(p(),_(m,{key:0,type:"primary",link:"",onClick:b=>x(l)},{default:i(()=>t[6]||(t[6]=[c("禁用")])),_:2},1032,["onClick"])):(p(),_(m,{key:1,type:"primary",link:"",onClick:b=>x(l),style:{color:"#ff0000"}},{default:i(()=>t[7]||(t[7]=[c("启用")])),_:2},1032,["onClick"])),e(m,{type:"primary",link:"",onClick:b=>H(l.id)},{default:i(()=>t[8]||(t[8]=[c("佣金记录")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","row-key"])),[[R,o(a).listLoading]]),e(O,{"current-page":o(a).page,total:o(a).total,"page-sizes":o(a).pageSizes,"page-size":o(a).limit,background:"",layout:"total, sizes, prev, pager, next",onSizeChange:o(I),onCurrentChange:o(L)},null,8,["current-page","total","page-sizes","page-size","onSizeChange","onCurrentChange"])]),_:1}),o(a).formVisible===!0?(p(),_(k,{key:0,visible:o(a).formVisible,"onUpdate:visible":t[1]||(t[1]=l=>o(a).formVisible=l),loading:o(a).formLoading,detail:o(a).detailData,onSubmit:o(q),type:"dialog",width:"600",title:(B=o(a).detailData)!=null&&B.id?"编辑":"新增",cancelBtnName:"取消",okBtnName:"确定"},{default:i(()=>[e(X)]),_:1},8,["visible","loading","detail","onSubmit","title"])):h("",!0),g.value?(p(),_(k,{key:1,visible:g.value,"onUpdate:visible":t[2]||(t[2]=l=>g.value=l),detail:w.value,onSubmit:A,type:"dialog",width:"600",title:v.value,cancelBtnName:"取消",okBtnName:"确定"},{default:i(()=>[e(W,{"form-feild":f.value},null,8,["form-feild"])]),_:1},8,["visible","detail","title"])):h("",!0),y.value?(p(),_(k,{key:2,visible:y.value,"onUpdate:visible":t[3]||(t[3]=l=>y.value=l),type:"drawer_v",width:"900",title:"佣金记录"},{default:i(()=>[e(Z,{user_id:V.value},null,8,["user_id"])]),_:1},8,["visible"])):h("",!0)],64)}}});const it=G(se,[["__scopeId","data-v-65891fa0"]]);export{it as default};
