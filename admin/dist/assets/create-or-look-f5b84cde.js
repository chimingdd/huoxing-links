import{U as O,M as E}from"./MaterialSelect-829aaccc.js";import{u as F}from"./form-e5ba5cf1.js";import{O as y,u as z,_ as N}from"./index-31481636.js";import{A as P}from"./domain-19077ac3.js";import{b as R}from"./app-959aa9a6.js";import{d as X,j as g,z as Y,r as u,X as G,o as d,b as f,f as a,i as t,w as i,t as c,g as e,Y as H,a as h,F as v,e as L,A as J,B as K}from"./.pnpm-9b0f0a98.js";import"./propData-3c6625bc.js";import"./curd-590e7fca.js";import"./cate-d48a821d.js";const V=m=>(J("data-v-e9f76583"),m=m(),K(),m),Q={style:{"margin-top":"-30px"},class:"m-b-20"},T=V(()=>a("span",null,"消耗个数：1个",-1)),W={class:"main"},Z={class:"item-box"},$={class:"function-img"},ee=V(()=>a("span",{class:"tip"},"只能上传jpg/png，建议大小100*100，且不超过1Mb",-1)),oe={class:"show hidden-md-and-down"},le=V(()=>a("span",null,"抖音卡片预览",-1)),ne={class:"show-box"},se={class:"show-des"},te={class:"show-des-t"},ae={class:"show-des-b"},ie=X({__name:"create-or-look",setup(m){const b=g(),{formData:o,formLoading:U}=F({formRef:b,defVal(n){return{title:n==null?void 0:n.title,type:"1",description:n==null?void 0:n.description,icon:n==null?void 0:n.icon,remark:n==null?void 0:n.remark,config:n!=null&&n.config?n==null?void 0:n.config:{}}}}),k=g(),I=async()=>{k.value=await P()},_=g(),D=async()=>{_.value=await R()},M={title:[{required:!0,message:"请输入标题",trigger:"blur"}],"config.domain_id":[{required:!0,message:"请选择域名",trigger:"blur"}],"config.min_id":[{required:!0,message:"请选择小程序",trigger:"blur"}],"config.url":[{required:!0,message:"落地小程序页面路径不能为空",trigger:"blur"}]};Y(()=>{I(),D()});const S=z,q=n=>{_.value.forEach(s=>{s.id==n&&(o.value.config.url=s.url)})};return(n,s)=>{const A=u("el-space"),p=u("el-input"),r=u("el-form-item"),w=u("el-option"),x=u("el-select"),B=u("el-form"),C=u("el-divider"),j=G("loading");return d(),f(v,null,[a("div",Q,[t(A,{class:"text-main"},{default:i(()=>[a("span",null,"总个数："+c(e(S).userInfo.link_amount)+"个",1),T]),_:1})]),a("div",W,[H((d(),h(B,{model:e(o),rules:M,ref_key:"formRef",ref:b,class:"form-box margin-right-40","label-position":"top"},{default:i(()=>[t(r,{prop:"title",label:"卡片标题"},{default:i(()=>[t(p,{modelValue:e(o).title,"onUpdate:modelValue":s[0]||(s[0]=l=>e(o).title=l),placeholder:"请输入卡片标题"},null,8,["modelValue"])]),_:1}),t(r,{label:"卡片描述"},{default:i(()=>[t(p,{modelValue:e(o).description,"onUpdate:modelValue":s[1]||(s[1]=l=>e(o).description=l),placeholder:"请输入卡片描述"},null,8,["modelValue"])]),_:1}),t(r,{label:"卡片封面图"},{default:i(()=>[a("div",Z,[t(y,{class:"margin-right-20",paths:e(o).icon?[e(o).icon]:[],width:100,height:100},null,8,["paths"]),a("div",null,[a("div",$,[t(O,{class:"margin-right-10",type:["image/jpg","image/jpeg","image/png"],size:1,modelValue:e(o).icon,"onUpdate:modelValue":s[2]||(s[2]=l=>e(o).icon=l)},null,8,["modelValue"]),t(E,{modelValue:e(o).icon,"onUpdate:modelValue":s[3]||(s[3]=l=>e(o).icon=l),class:"margin-right-20"},null,8,["modelValue"])]),ee])])]),_:1}),t(r,{label:"卡片备注"},{default:i(()=>[t(p,{modelValue:e(o).remark,"onUpdate:modelValue":s[4]||(s[4]=l=>e(o).remark=l),placeholder:"请输入卡片备注，例如：xxx活动（选填）"},null,8,["modelValue"])]),_:1}),t(r,{prop:"config.domain_id",label:"无风险域名"},{default:i(()=>[t(x,{modelValue:e(o).config.domain_id,"onUpdate:modelValue":s[5]||(s[5]=l=>e(o).config.domain_id=l),placeholder:"请选择"},{default:i(()=>[(d(!0),f(v,null,L(k.value,l=>(d(),h(w,{key:l.id,label:l.title,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(r,{prop:"config.min_id",label:"落地小程序",required:""},{default:i(()=>[t(x,{modelValue:e(o).config.min_id,"onUpdate:modelValue":s[6]||(s[6]=l=>e(o).config.min_id=l),placeholder:"请选择",onChange:q},{default:i(()=>[(d(!0),f(v,null,L(_.value,l=>(d(),h(w,{key:l.id,label:l.name,value:l.id},{default:i(()=>[a("span",null,c(l.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(r,{prop:"config.url",label:"落地小程序页面路径"},{default:i(()=>[t(p,{modelValue:e(o).config.url,"onUpdate:modelValue":s[7]||(s[7]=l=>e(o).config.url=l),placeholder:"例如：/pages/index"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[j,e(U)]]),a("div",oe,[t(C,null,{default:i(()=>[le]),_:1}),a("div",ne,[t(y,{class:"margin-right-20",paths:e(o).icon?[e(o).icon]:[],width:100,height:100},null,8,["paths"]),a("div",se,[a("span",te,c(e(o).title||"卡片标题"),1),a("span",ae,c(e(o).description||"卡片描述"),1)])])])])],64)}}});const he=N(ie,[["__scopeId","data-v-e9f76583"]]);export{he as default};
