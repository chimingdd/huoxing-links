import{u as L}from"./curd-d4de2d1c.js";import{_ as N}from"./FormModal.vue_vue_type_script_setup_true_lang-b27420e1.js";import U from"./create-or-look-7cdca64d.js";import{j as D,O as $,k as H,_ as I}from"./index-86b502e8.js";import{d as O,r as i,X as j,o as s,b as u,i as t,w as o,g as e,a as c,h as f,l as d,Y as A}from"./.pnpm-9b0f0a98.js";import"./propData-3c6625bc.js";import"./MaterialSelect-66317470.js";import"./cate-94219edf.js";import"./app-f576f77c.js";import"./form-e5ba5cf1.js";import"./domain-0e0b73b5.js";const E={key:0},K={key:1,style:{color:"red"}},T=O({__name:"index",props:{type:{}},setup(k){const C=k,h=D(),{state:l,sizeChangeHandle:v,currentChangeHandle:x,showForm:_,submitForm:V,research:F,deleteHandle:w}=L({url:"/links",queryForm:{type:C.type,page:1,username:""}});return(X,r)=>{var y;const g=i("el-input"),m=i("el-col"),p=i("el-button"),z=i("el-row"),n=i("el-table-column"),S=i("el-table"),q=i("el-pagination"),B=j("loading");return s(),u("div",null,[t(z,{gutter:20},{default:o(()=>[t(m,{xs:24,sm:8,md:8,lg:6,class:"m-b-20"},{default:o(()=>[t(g,{style:{width:"100%"},modelValue:e(l).queryForm.title,"onUpdate:modelValue":r[0]||(r[0]=a=>e(l).queryForm.title=a),placeholder:"请输入标题",clearable:""},null,8,["modelValue"])]),_:1}),e(h).userInfo.type===3?(s(),c(m,{key:0,xs:24,sm:8,md:8,lg:6,class:"m-b-20"},{default:o(()=>[t(g,{style:{width:"100%"},placeholder:"请输入用户名",modelValue:e(l).queryForm.username,"onUpdate:modelValue":r[1]||(r[1]=a=>e(l).queryForm.username=a),clearable:""},null,8,["modelValue"])]),_:1})):f("",!0),t(m,{xs:24,sm:8,md:8,lg:6,class:"m-b-20"},{default:o(()=>[t(p,{type:"primary",onClick:e(F)},{default:o(()=>[d("搜索")]),_:1},8,["onClick"]),t(p,{type:"primary",plain:!0,onClick:e(_)},{default:o(()=>[d("创建小程序")]),_:1},8,["onClick"])]),_:1})]),_:1}),A((s(),c(S,{data:e(l).dataList,"header-cell-style":{"text-align":"center","background-color":"#F1F1F1",height:"50px",color:"#333"},"cell-style":{padding:"0","text-align":"center",height:"80px",color:"#333"},"row-key":e(l).primaryKey},{default:o(()=>[t(n,{prop:"id",label:"序号"}),t(n,{label:"图片"},{default:o(({row:a})=>[t($,{paths:a.icon?[a.icon]:[],width:60,height:60,style:{margin:"0 auto"}},null,8,["paths"])]),_:1}),t(n,{prop:"title",label:"卡片标题"}),t(n,{prop:"description",label:"卡片描述"}),t(n,{prop:"",label:"链接状态"},{default:o(({row:a})=>[a.status==1?(s(),u("span",E,"可用")):(s(),u("span",K,"不可用"))]),_:1}),t(n,{prop:"visit_uv_count",label:"浏览量UV"}),t(n,{prop:"expired_at",label:"到期时间"}),t(n,{prop:"user.username",label:"所属用户"}),t(n,{label:"操作"},{default:o(({row:a})=>[t(p,{type:"primary",link:"",onClick:b=>e(H)(a)},{default:o(()=>[d("复制链接")]),_:2},1032,["onClick"]),t(p,{type:"primary",link:"",onClick:b=>e(_)(a.id)},{default:o(()=>[d("编辑")]),_:2},1032,["onClick"]),t(p,{type:"primary",link:"",onClick:b=>e(w)(a.id)},{default:o(()=>[d("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","row-key"])),[[B,e(l).listLoading]]),t(q,{"current-page":e(l).page,total:e(l).total,"page-sizes":e(l).pageSizes,"page-size":e(l).limit,background:"",layout:"total, sizes, prev, pager, next",onSizeChange:e(v),onCurrentChange:e(x)},null,8,["current-page","total","page-sizes","page-size","onSizeChange","onCurrentChange"]),e(l).formVisible===!0?(s(),c(N,{key:0,visible:e(l).formVisible,"onUpdate:visible":r[2]||(r[2]=a=>e(l).formVisible=a),width:"1000",type:"dialog",title:(y=e(l).detailData)!=null&&y.id?"编辑":"新增",loading:e(l).formLoading,detail:e(l).detailData,onSubmit:e(V),cancelBtnName:"取消",okBtnName:"确定"},{default:o(()=>[t(U)]),_:1},8,["visible","title","loading","detail","onSubmit"])):f("",!0)])}}});const le=I(T,[["__scopeId","data-v-84a548ea"]]);export{le as default};
