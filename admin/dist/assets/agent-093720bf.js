import{u as E}from"./curd-08f35801.js";import{d as N,r as n,X as L,o as c,b as U,i as a,w as o,f as $,g as e,a as p,l as _,ah as H,h as b,Y as q,F as I,E as A}from"./.pnpm-0d809032.js";import{_ as K}from"./FormModal.vue_vue_type_script_setup_true_lang-7a4a6970.js";import{_ as M}from"./agentForm.vue_vue_type_script_setup_true_lang-7b8c41fc.js";import{_ as T}from"./addAgentForm.vue_vue_type_script_setup_true_lang-bc74eadb.js";import{u as X}from"./index-9afa9bfa.js";import{E as Y}from"./newAgent-5a291778.js";import"./propData-9c18804a.js";import"./form-55b2d4db.js";import"./super-785c5da8.js";const j={class:"margin-b-20"},oe=N({__name:"agent",setup(G){const{state:t,sizeChangeHandle:h,currentChangeHandle:y,showForm:g,submitForm:C,research:k}=E({url:"/users"}),v=X,V=(d,i)=>{Y(d,i).then(()=>{let r=i===!0?"操作成功！最多需要10秒才能生效":"操作成功！";A.success(r)}).catch(()=>{var r;(r=t.dataList)==null||r.forEach(m=>{m.id===d&&(m.is_enable=!i)})})};return(d,i)=>{var f;const r=n("el-button"),m=n("el-input"),x=n("el-space"),s=n("el-table-column"),z=n("el-switch"),F=n("el-empty"),w=n("el-table"),D=n("el-pagination"),S=n("el-card"),B=L("loading");return c(),U(I,null,[a(S,null,{default:o(()=>[$("div",j,[a(x,null,{default:o(()=>[e(v).userInfo.type===3?(c(),p(r,{key:0,type:"primary",icon:e(H),onClick:e(g)},{default:o(()=>[_("新增")]),_:1},8,["icon","onClick"])):b("",!0),a(m,{modelValue:e(t).queryForm.username,"onUpdate:modelValue":i[0]||(i[0]=l=>e(t).queryForm.username=l),placeholder:"请输入手机号查询"},null,8,["modelValue"]),a(r,{type:"primary",onClick:e(k)},{default:o(()=>[_("查询")]),_:1},8,["onClick"])]),_:1})]),q((c(),p(w,{data:e(t).dataList,"header-cell-style":{"text-align":"center","background-color":"#F1F1F1",height:"50px",color:"#333"},"cell-style":{padding:"0","text-align":"center",height:"50px",color:"#333"},"row-key":e(t).primaryKey},{empty:o(()=>[a(F)]),default:o(()=>[a(s,{prop:"id",label:"ID",width:"60"}),a(s,{prop:"username",label:"手机号"}),a(s,{prop:"link_amount",label:"链接剩余个数"}),a(s,{prop:"yuanma_amount",label:"小圆码剩余个数"}),a(s,{prop:"dy_card_amount",label:"自动回复剩余个数"}),a(s,{prop:"created_at",label:"账户状态"},{default:o(({row:l})=>[a(z,{modelValue:l.status,"onUpdate:modelValue":u=>l.status=u,"active-value":!0,"inactive-value":!1,"active-text":"开启","inactive-text":"禁用","inline-prompt":"",onChange:u=>V(l.id,u)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),a(s,{prop:"",label:"操作",fixed:"right"},{default:o(({row:l})=>[a(r,{type:"primary",link:"",onClick:u=>e(g)(l.id)},{default:o(()=>[_("修改")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","row-key"])),[[B,e(t).listLoading]]),a(D,{"current-page":e(t).page,total:e(t).total,"page-sizes":e(t).pageSizes,"page-size":e(t).limit,background:"",layout:"total, sizes, prev, pager, next",onSizeChange:e(h),onCurrentChange:e(y)},null,8,["current-page","total","page-sizes","page-size","onSizeChange","onCurrentChange"])]),_:1}),e(t).formVisible===!0?(c(),p(K,{key:0,visible:e(t).formVisible,"onUpdate:visible":i[1]||(i[1]=l=>e(t).formVisible=l),loading:e(t).formLoading,detail:e(t).detailData,onSubmit:e(C),type:"dialog",width:"600",title:(f=e(t).detailData)!=null&&f.id?"编辑":"新增",cancelBtnName:"取消",okBtnName:"确定"},{default:o(()=>[e(t).detailData&&e(t).detailData.id?(c(),p(M,{key:0})):(c(),p(T,{key:1}))]),_:1},8,["visible","loading","detail","onSubmit","title"])):b("",!0)],64)}}});export{oe as default};
