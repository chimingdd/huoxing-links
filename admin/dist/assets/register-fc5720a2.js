import{d as N,x as L,j as u,u as S,s as H,r as i,X as j,b as z,i as a,w as r,g as p,Z as F,o as m,Y as C,a as w,_ as G,l as b,h as I,f as W,E as x}from"./.pnpm-0d809032.js";import{u as k}from"./propData-9c18804a.js";import{c as f,A as X,_ as Y}from"./index-65d2ca96.js";import{i as B}from"./imageCaptcha-3661e1a7.js";import Z from"./PayButton-009f20fd.js";import"./pay-805b7bf3.js";const J={class:"reg-footer"},K=N({__name:"register",props:{visible:{type:Boolean},close_btn:{type:Boolean}},emits:["update:visible"],setup(R,{emit:$}){const y=R;L();const c=k(()=>y.visible,!1),P=k(()=>y.close_btn,!1),D=u(),h=u(!1),t=u({phone:"",password:"",confirmPassword:"",authCode:"",agent:""}),_=u(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/),d=u("邮箱");f.verify_code_is_open===1&&(_.value=f.code_mode===1?/^1\d{10}$/:/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/,d.value=f.code_mode===1?"手机号":"邮箱");const T={phone:[{required:!0,message:`请输入${d.value}`,trigger:"blur"},{pattern:_.value,message:`请输入正确的${d.value}`,trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"长度在 6 到 16 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:(g,e,l)=>{e!==t.value.password?l(new Error("两次输入密码不一致")):l()},trigger:"blur"}],authCode:[{required:!0,message:"请输入验证码",trigger:"blur"}],agent:[{required:!0,message:"请选择代理类型",trigger:"blur"}]},v=u(!1),q=async g=>{if(!_.value.test(t.value.phone))return x.error(`请输入正确的${d.value}！`);const e=g.target;B.show(function(l){B.hide(),X({tel:t.value.phone,captcha:l.code,key:l.key}).then(()=>{v.value=!0,x.success("发送成功");const n=function(){let s=e.getAttribute("data-time");s<=0&&(s=60),s--,e.innerHTML=s+"秒后重新获取",e.setAttribute("data-time",s),s>0?setTimeout(n,1e3):(v.value=!1,e.innerHTML="发送验证码")};n()})})};S();const A=H(),U=u();return(g,e)=>{const l=i("el-input"),n=i("el-form-item"),s=i("el-button"),E=i("el-form"),M=i("el-drawer"),V=j("loading");return m(),z("div",null,[a(M,{modelValue:p(c),"onUpdate:modelValue":e[6]||(e[6]=o=>F(c)?c.value=o:null),class:"register_drawer",modal:!1,title:"注册账号","show-close":!p(P),onClose:e[7]||(e[7]=o=>$("update:visible",!1))},{default:r(()=>[C((m(),w(E,{ref_key:"formRef",ref:D,model:t.value,rules:T,"label-position":"left","label-width":"80px"},{default:r(()=>[a(n,{prop:"phone",label:d.value},{default:r(()=>[a(l,{modelValue:t.value.phone,"onUpdate:modelValue":e[0]||(e[0]=o=>t.value.phone=o),placeholder:"请输入"+d.value},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{prop:"password",label:"密码"},{default:r(()=>[a(l,{modelValue:t.value.password,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.password=o),type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]),_:1}),a(n,{prop:"confirmPassword",label:"确认密码"},{default:r(()=>[a(l,{modelValue:t.value.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.confirmPassword=o),type:"password",placeholder:"请再次输入密码"},null,8,["modelValue"])]),_:1}),p(f).verify_code_is_open===1?(m(),w(n,{key:0,prop:"authCode",label:"验证码"},{default:r(()=>[a(l,{modelValue:t.value.authCode,"onUpdate:modelValue":e[4]||(e[4]=o=>t.value.authCode=o),placeholder:"请输入验证码"},{suffix:r(()=>[a(s,{class:"code-btn",disabled:v.value,type:"primary",onClick:e[3]||(e[3]=G(o=>q(o),["stop"]))},{default:r(()=>[b(" 发送验证码 ")]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1})):I("",!0)]),_:1},8,["model"])),[[V,h.value]]),C((m(),w(s,{class:"sign-btn",type:"primary"},{default:r(()=>[b(" 立即注册 ")]),_:1})),[[V,h.value]]),W("div",J,[a(s,{type:"primary",link:"",onClick:e[5]||(e[5]=o=>p(A).push("/login"))},{default:r(()=>[b("已有账号，去登录！")]),_:1})])]),_:1},8,["modelValue","show-close"]),a(Z,{ref_key:"payBtnRef",ref:U,type:"pay-agent",info:{}},null,512)])}}});const le=Y(K,[["__scopeId","data-v-d978296d"]]);export{le as default};
