import{u as A}from"./curd-66c8d773.js";import{O as E,I as F,_ as M}from"./index-eb0483c8.js";import{B as P}from"./@element-plus-11e7d0b3.js";import{_ as $}from"./FormModal.vue_vue_type_script_setup_true_lang-9b833357.js";import{_ as q}from"./create-or-look.vue_vue_type_script_setup_true_lang-27588240.js";import H from"./cate-ef64fc7b.js";import{A as T}from"./app-bf1cc552.js";import{a as U,E as O}from"./element-plus-baf202ae.js";import{d as Q,r as p,A as R,ag as d,o as c,c as g,Q as a,I as m,a as n,u as e,M as C,P as x,a5 as j,H as G,L as J,D as K}from"./@vue-d872a633.js";import"./pinia-cb4be529.js";import"./vue-demi-71ba0ef2.js";import"./pinia-plugin-persistedstate-ed167f96.js";import"./axios-439bb627.js";import"./qs-6612e700.js";import"./side-channel-32a248f0.js";import"./es-errors-c75f5a96.js";import"./object-inspect-110ff94a.js";import"./call-bind-apply-helpers-be8cb158.js";import"./function-bind-48f717dc.js";import"./side-channel-list-1667605c.js";import"./side-channel-map-a9d6574a.js";import"./get-intrinsic-8d8987ad.js";import"./es-object-atoms-11ea1ab9.js";import"./math-intrinsics-9389030e.js";import"./gopd-30775706.js";import"./es-define-property-27915812.js";import"./has-symbols-76fb15e9.js";import"./get-proto-15e8f36b.js";import"./dunder-proto-2a4d8230.js";import"./hasown-31deb62f.js";import"./call-bound-dbfc98a1.js";import"./side-channel-weakmap-a7bef06b.js";import"./vue-router-154b9487.js";import"./@vueuse-9028f0e6.js";import"./nprogress-72cfee09.js";/* empty css                    */import"./lodash-es-32f1e46b.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-f13f0179.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-5ec34e26.js";import"./propData-8a0097e5.js";import"./form-3c660157.js";const W={class:"top-box"},X={class:"header-right",style:{"margin-bottom":"10px"}},Y={class:"content-box"},Z={style:{"margin-bottom":"15px","margin-left":"8px"}},ee={class:"item-list"},te=["onClick","onDblclick"],oe=["src"],ie=Q({__name:"index",setup(ae){const f=p(null),{state:t,showForm:y,submitForm:k,sizeChangeHandle:w,currentChangeHandle:V,query:v}=A({url:"/material-upload",limit:48,queryForm:{cate_id:f,page:1}}),r=p([]),B=l=>{const o=r.value.find(s=>s===l);o?r.value=r.value.filter(s=>s!==o):r.value.push(l)},z=()=>{U.confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{T(r.value).then(()=>{O.success("操作成功！"),window.location.reload()})})},u=p(!1),b=p(""),I=l=>{b.value=F(l),u.value=!0},D=l=>{f.value=l,v()};return R("query",v),(l,o)=>{var h;const s=d("el-button"),N=d("el-pagination"),L=d("el-card"),S=d("el-dialog");return c(),g(x,null,[a(L,null,{default:m(()=>[n("div",W,[n("div",X,[a(s,{type:"primary",icon:e(P),onClick:e(y)},{default:m(()=>o[2]||(o[2]=[C("上传图片")])),_:1},8,["icon","onClick"])]),a(s,{type:"primary",disabled:!r.value,plain:"",onClick:z},{default:m(()=>o[3]||(o[3]=[C(" 删除选中项 ")])),_:1},8,["disabled"])]),n("div",Y,[n("div",Z,[a(H,{onRsCate:D})]),n("div",ee,[(c(!0),g(x,null,j(e(t).dataList,i=>(c(),g("div",{class:K(["item-img",{"active-border":r.value.find(_=>_===i.id)}]),key:i.id,onClick:_=>B(i.id),onDblclick:_=>I(i.path)},[a(E,{paths:[i.path],width:100,height:100},null,8,["paths"])],42,te))),128))]),a(N,{"current-page":e(t).page,total:e(t).total,"page-sizes":e(t).pageSizes,"page-size":e(t).limit,background:"",layout:"total,  prev, pager, next",onSizeChange:e(w),onCurrentChange:e(V)},null,8,["current-page","total","page-sizes","page-size","onSizeChange","onCurrentChange"])])]),_:1}),a(S,{modelValue:u.value,"onUpdate:modelValue":o[0]||(o[0]=i=>u.value=i)},{default:m(()=>[n("img",{class:"preview",src:b.value,alt:"Preview Image",style:{"max-width":"100%",margin:"0 auto"}},null,8,oe)]),_:1},8,["modelValue"]),e(t).formVisible===!0?(c(),G($,{key:0,visible:e(t).formVisible,"onUpdate:visible":o[1]||(o[1]=i=>e(t).formVisible=i),loading:e(t).formLoading,detail:e(t).detailData,onSubmit:e(k),type:"dialog",width:"600",title:(h=e(t).detailData)!=null&&h.id?"编辑":"新增",cancelBtnName:"取消",okBtnName:"确定"},{default:m(()=>[a(q)]),_:1},8,["visible","loading","detail","onSubmit","title"])):J("",!0)],64)}}});const Xe=M(ie,[["__scopeId","data-v-e2825680"]]);export{Xe as default};
