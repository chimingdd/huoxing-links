import{u as T}from"./form-e5ba5cf1.js";import{d as $,j as x,z as ee,r as d,X as le,o as r,b as p,f as n,i as e,w as a,t as A,g as o,Y as te,a as f,l as g,ap as O,h as b,F as U,e as H,A as oe,B as ae}from"./.pnpm-9b0f0a98.js";import{A as ne}from"./domain-19077ac3.js";import{b as se}from"./app-959aa9a6.js";import{O as _,u as ie,_ as de}from"./index-31481636.js";import{U as B,M as X}from"./MaterialSelect-829aaccc.js";import"./propData-3c6625bc.js";import"./curd-590e7fca.js";import"./cate-d48a821d.js";const re="data:image/png;base64,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",h=w=>(oe("data-v-6dde4a39"),w=w(),ae(),w),ce={style:{"margin-top":"-30px"},class:"m-b-20"},ue=h(()=>n("span",null,"消耗个数：1个",-1)),pe={class:"main"},me={class:"item-box"},ge={class:"function-img"},_e=h(()=>n("span",{class:"tip"},"只能上传jpg/png，建议大小100*100，且不超过1Mb",-1)),Ae={class:"item-box"},fe={class:"function-img"},he=h(()=>n("span",{class:"tip"},"只能上传jpg/png，建议大小80*80，且不超过1Mb",-1)),we={class:"qr-tip"},ve={key:0},Ve={key:1},xe={class:"qr-tip"},be={key:0},ye={key:1},Ue={class:"show hidden-md-and-down"},Be=h(()=>n("span",null,"抖音卡片预览",-1)),ke={class:"show-box"},De={class:"show-des"},Ce={class:"show-des-t"},Fe={class:"show-des-b"},Le={class:"wx-box"},Me=h(()=>n("img",{class:"wx-img",src:re,alt:""},null,-1)),Qe={class:"wx-main"},qe={class:"wx-header"},Ie={class:"show-des"},Oe={class:"show-des-t"},He={class:"show-des-b"},Xe={class:"wx-qr"},ze=$({__name:"create-or-look",setup(w){const k=x(),{formData:t,formLoading:z}=T({formRef:k,defVal(i){return{type:"5",icon:i==null?void 0:i.icon,remark:i==null?void 0:i.remark,config:i!=null&&i.config?i==null?void 0:i.config:{wx:{qr:[],switch_type:1,uv_limit_type:1}}}}}),D=x(),K=async()=>{D.value=await ne()},C=x(),S=async()=>{C.value=await se()},G={"config.wx.title":[{required:!0,message:"请输入标题",trigger:"blur"}],"config.domain_id":[{required:!0,message:"请选择域名",trigger:"blur"}],"config.min_id":[{required:!0,message:"请选择小程序",trigger:"blur"}],"config.url":[{required:!0,message:"请选择二维码图片",trigger:"blur"}]},v=x({sort:null,name:"",path:"",expired_at:"",uv_limit_num:null}),Z=()=>{t.value.config.wx.qr&&(v.value.sort=t.value.config.wx.qr.length+1,v.value.name="默认名称"+v.value.sort,t.value.config.wx.qr.push(JSON.parse(JSON.stringify(v.value))))},R=i=>{t.value.config.wx.qr.splice(i,1)},j=ie;return ee(()=>{K(),S()}),(i,s)=>{const W=d("el-space"),y=d("el-input"),u=d("el-form-item"),F=d("el-input-number"),m=d("el-table-column"),J=d("el-date-picker"),L=d("el-button"),E=d("el-table"),V=d("el-radio"),M=d("el-radio-group"),Q=d("el-icon"),q=d("el-option"),I=d("el-select"),P=d("el-form"),Y=d("el-divider"),N=le("loading");return r(),p(U,null,[n("div",ce,[e(W,{class:"text-main"},{default:a(()=>[n("span",null,"总个数："+A(o(j).userInfo.link_amount)+"个",1),ue]),_:1})]),n("div",pe,[te((r(),f(P,{model:o(t),rules:G,ref_key:"formRef",ref:k,class:"form-box margin-right-40","label-position":"top"},{default:a(()=>[e(u,{prop:"config.wx.title",label:"标题"},{default:a(()=>[e(y,{style:{width:"100%"},modelValue:o(t).config.wx.title,"onUpdate:modelValue":s[0]||(s[0]=l=>o(t).config.wx.title=l),placeholder:"请输入标题"},null,8,["modelValue"])]),_:1}),e(u,{label:"副标题"},{default:a(()=>[e(y,{modelValue:o(t).config.wx.sub_title,"onUpdate:modelValue":s[1]||(s[1]=l=>o(t).config.wx.sub_title=l),placeholder:"请输入副标题"},null,8,["modelValue"])]),_:1}),e(u,{label:"卡片封面图",required:""},{default:a(()=>[n("div",me,[e(_,{class:"margin-right-20",paths:o(t).icon?[o(t).icon]:[],width:100,height:100},null,8,["paths"]),n("div",null,[n("div",ge,[e(B,{class:"margin-right-10",type:["image/jpg","image/jpeg","image/png"],size:1,modelValue:o(t).icon,"onUpdate:modelValue":s[2]||(s[2]=l=>o(t).icon=l)},null,8,["modelValue"]),e(X,{modelValue:o(t).icon,"onUpdate:modelValue":s[3]||(s[3]=l=>o(t).icon=l),class:"margin-right-20"},null,8,["modelValue"])]),_e])])]),_:1}),e(u,{label:"微信头像"},{default:a(()=>[n("div",Ae,[e(_,{class:"margin-right-20",paths:o(t).config.wx.avatar?[o(t).config.wx.avatar]:[],width:100,height:100},null,8,["paths"]),n("div",null,[n("div",fe,[e(B,{class:"margin-right-10",type:["image/jpg","image/jpeg","image/png"],size:1,modelValue:o(t).config.wx.avatar,"onUpdate:modelValue":s[4]||(s[4]=l=>o(t).config.wx.avatar=l)},null,8,["modelValue"]),e(X,{modelValue:o(t).config.wx.avatar,"onUpdate:modelValue":s[5]||(s[5]=l=>o(t).config.wx.avatar=l),class:"margin-right-20"},null,8,["modelValue"])]),he])])]),_:1}),e(u,{label:"二维码管理",required:""},{default:a(()=>[e(E,{data:o(t).config.wx.qr,"header-cell-style":{"text-align":"center","background-color":"#F1F1F1",height:"50px",color:"#333"},"cell-style":{padding:"0","text-align":"center",height:"50px",color:"#333"}},{default:a(()=>[e(m,{prop:"sort",label:"优先级"},{default:a(({row:l})=>[e(F,{style:{width:"100px"},modelValue:l.sort,"onUpdate:modelValue":c=>l.sort=c},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(m,{prop:"name",label:"二维码文件名"},{default:a(({row:l})=>[e(y,{modelValue:l.name,"onUpdate:modelValue":c=>l.name=c},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(m,{prop:"path",label:"二维码"},{default:a(({row:l})=>[l.path?(r(),f(_,{key:1,paths:[l.path],width:40,height:40},null,8,["paths"])):(r(),f(B,{key:0,modelValue:l.path,"onUpdate:modelValue":c=>l.path=c},null,8,["modelValue","onUpdate:modelValue"]))]),_:1}),e(m,{prop:"expired_at",label:"失效日期"},{default:a(({row:l})=>[e(J,{modelValue:l.expired_at,"onUpdate:modelValue":c=>l.expired_at=c,"value-format":"YYYY-MM-DD",type:"date",placeholder:"不选为永久"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(m,{prop:"uv_limit_num",label:"访问上限(UV)",width:200},{default:a(({row:l})=>[e(F,{style:{width:"170px"},modelValue:l.uv_limit_num,"onUpdate:modelValue":c=>l.uv_limit_num=c,placeholder:"不填为无限"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(m,{label:"操作"},{default:a(({$index:l})=>[e(L,{type:"primary",link:"",onClick:c=>R(l)},{default:a(()=>[g("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(L,{class:"add-qr",onClick:Z},{default:a(()=>[g("点击添加二维码")]),_:1})]),_:1}),e(u,{label:"二维码切换方式"},{default:a(()=>[n("div",null,[e(M,{modelValue:o(t).config.wx.switch_type,"onUpdate:modelValue":s[6]||(s[6]=l=>o(t).config.wx.switch_type=l)},{default:a(()=>[e(V,{value:1,label:1},{default:a(()=>[g("轮询切换")]),_:1}),e(V,{value:3,label:2},{default:a(()=>[g("随机切换")]),_:1})]),_:1},8,["modelValue"]),n("div",we,[e(Q,{class:"margin-right-10"},{default:a(()=>[e(o(O))]),_:1}),o(t).config.wx.switch_type===1?(r(),p("span",ve,"根据二维码的优先级顺序，平均展示给访问用户")):b("",!0),o(t).config.wx.switch_type===2?(r(),p("span",Ve,"将所上传的二维码随机展示")):b("",!0)])])]),_:1}),e(u,{label:"二维码访问上限类型"},{default:a(()=>[n("div",null,[e(M,{modelValue:o(t).config.wx.uv_limit_type,"onUpdate:modelValue":s[7]||(s[7]=l=>o(t).config.wx.uv_limit_type=l)},{default:a(()=>[e(V,{value:1,label:1},{default:a(()=>[g("积累限制")]),_:1}),e(V,{value:2,label:2},{default:a(()=>[g("每日限制")]),_:1})]),_:1},8,["modelValue"]),n("div",xe,[e(Q,{class:"margin-right-10"},{default:a(()=>[e(o(O))]),_:1}),o(t).config.wx.uv_limit_type===1?(r(),p("span",be,"所上传的每个二维码，[累计访问]次数达到所设置的访问上限后，则按规则切换至其他二维码")):b("",!0),o(t).config.wx.uv_limit_type===2?(r(),p("span",ye,"所上传的每个二维码，[每日限制]次数达到所设置的访问上限后，则按规则切换至其他二维码")):b("",!0)])])]),_:1}),e(u,{prop:"config.domain_id",label:"无风险域名"},{default:a(()=>[e(I,{modelValue:o(t).config.domain_id,"onUpdate:modelValue":s[8]||(s[8]=l=>o(t).config.domain_id=l),placeholder:"请选择"},{default:a(()=>[(r(!0),p(U,null,H(D.value,l=>(r(),f(q,{key:l.id,label:l.title,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(u,{prop:"config.min_id",label:"落地小程序"},{default:a(()=>[e(I,{modelValue:o(t).config.min_id,"onUpdate:modelValue":s[9]||(s[9]=l=>o(t).config.min_id=l),placeholder:"请选择"},{default:a(()=>[(r(!0),p(U,null,H(C.value,l=>(r(),f(q,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[N,o(z)]]),n("div",Ue,[e(Y,null,{default:a(()=>[Be]),_:1}),n("div",ke,[e(_,{class:"margin-right-20",paths:o(t).icon?[o(t).icon]:[],width:100,height:100},null,8,["paths"]),n("div",De,[n("span",Ce,A(o(t).config.wx.title||"卡片标题"),1),n("span",Fe,A(o(t).config.wx.sub_title||"卡片描述"),1)])]),n("div",Le,[Me,n("div",Qe,[n("div",qe,[e(_,{class:"margin-right-20",paths:o(t).config.wx.avatar?[o(t).config.wx.avatar]:[],width:60,height:60},null,8,["paths"]),n("div",Ie,[n("span",Oe,A(o(t).config.wx.title||"标题"),1),n("span",He,A(o(t).config.wx.sub_title||"副标题"),1)])]),n("div",Xe,[e(_,{class:"margin-right-20",paths:o(t).config.wx.qr.length>0?[o(t).config.wx.qr[0].path]:[],width:160,height:160},null,8,["paths"])])])])])])],64)}}});const Pe=de(ze,[["__scopeId","data-v-6dde4a39"]]);export{Pe as default};
